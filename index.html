<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Student Topics Widget</title>

<style>
body {
    background: #191919;
    font-family: Inter, sans-serif;
    display: flex;
    justify-content: center;
    padding: 40px;
    color: white;
}

.widget {
    width: 420px;
}

.card {
    background: #000000;
    border-radius: 18px;
    padding: 20px;
    box-shadow: 0 0 25px rgba(0,0,0,0.6);
}

.student-name {
    color: #ff006b;
    font-size: 22px;
    font-weight: 700;
    margin-bottom: 18px;
    text-align: left;
}

.topic-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.topic {
    display: grid;
    grid-template-columns: 24px 1fr 24px;
    gap: 12px;
    align-items: center;
}

.topic input[type="checkbox"] {
    appearance: none;
    width: 18px;
    height: 18px;
    border: 2px solid #ff006b;
    border-radius: 4px;
    cursor: pointer;
}

.topic input[type="checkbox"]:checked {
    background: #ff006b;
}

.topic span {
    word-break: break-word;
    line-height: 1.4;
    display: flex;
    align-items: center;
}

.topic.done span {
    text-decoration: line-through;
    text-decoration-color: #ff006b;
    text-decoration-thickness: 2px;
    opacity: 0.7;
}

/* ===== KOSZ ===== */
.delete-btn {
    opacity: 0;
    cursor: pointer;
    font-size: 16px;
    text-align: center;
    transition: 0.2s;
    user-select: none;
    color: #ff006b;
}

.topic:hover .delete-btn {
    opacity: 0.8;
}

.delete-btn:hover {
    opacity: 1;
    transform: scale(1.2);
}

/* ===== DODAWANIE ===== */
.add-row {
    display: grid;
    grid-template-columns: 1fr 40px;
    gap: 10px;
    margin-top: 18px;
}

.add-input {
    background: #111;
    border: 1px solid #333;
    border-radius: 10px;
    padding: 10px;
    color: white;
    outline: none;
}

.add-input::placeholder {
    color: #666;
}

.add-btn {
    background: #ff006b;
    border: none;
    color: black;
    font-weight: bold;
    border-radius: 10px;
    cursor: pointer;
    font-size: 20px;
}
</style>
</head>

<body>

<div class="widget">
    <div class="card">

        <!-- TU WPISUJESZ UCZNIA -->
        <div class="student-name">
            Kamila Olszewska
        </div>

        <div class="topic-list" id="topicList"></div>

        <div class="add-row">
            <input 
                class="add-input"
                id="topicInput"
                placeholder="Add topic..."
            >
            <button class="add-btn" id="addTopicBtn">+</button>
        </div>

    </div>
</div>

<script>
const topicList = document.getElementById("topicList");
const addBtn = document.getElementById("addTopicBtn");
const input = document.getElementById("topicInput");

const STORAGE_KEY = "student_topics_widget";

let topics = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];

function saveTopics() {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(topics));
}

function renderTopics() {
    topicList.innerHTML = "";

    topics.forEach((topic, index) => {

        const div = document.createElement("div");
        div.className = "topic";
        if (topic.done) div.classList.add("done");

        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.checked = topic.done;

        checkbox.addEventListener("change", () => {
            topics[index].done = checkbox.checked;
            saveTopics();
            renderTopics();
        });

        const span = document.createElement("span");
        span.textContent = topic.text;

        /* ===== KOSZ ===== */
        const deleteBtn = document.createElement("div");
        deleteBtn.className = "delete-btn";
        deleteBtn.textContent = "x";

        deleteBtn.addEventListener("click", () => {
            topics.splice(index, 1);
            saveTopics();
            renderTopics();
        });

        div.appendChild(checkbox);
        div.appendChild(span);
        div.appendChild(deleteBtn);

        topicList.appendChild(div);
    });
}

function addTopic() {
    const text = input.value.trim();
    if (!text) return;

    topics.push({
        text: text,
        done: false
    });

    input.value = "";
    saveTopics();
    renderTopics();
}

addBtn.addEventListener("click", addTopic);

input.addEventListener("keypress", e => {
    if (e.key === "Enter") addTopic();
});

renderTopics();
</script>

</body>
</html>
